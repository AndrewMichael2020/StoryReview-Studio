title,body,labels,milestone
"Initialize Project Repository","## Description
Set up the project with proper structure and tooling.

## Acceptance Criteria
- [ ] Initialize frontend framework (React/Next.js recommended)
- [ ] Set up TypeScript configuration
- [ ] Configure ESLint and Prettier
- [ ] Set up testing framework (Jest + React Testing Library)
- [ ] Create basic folder structure
- [ ] Add README with project overview

## Priority
High

## Type
Task","setup,infrastructure","Phase 1: Foundation"
"Define Data Models","## Description
Implement the core data models as defined in Part 6 of the strategy document.

## Acceptance Criteria
- [ ] Story model (id, title, premise, targetLength, form, pov, verificationQuestions, status)
- [ ] Bundle model (id, storyId, name, type, state, sources, extracts, claims)
- [ ] Bundle types: event, identity, quantity, attribution, sequence
- [ ] Reliability states: verified, sourced, unlinked, contested
- [ ] Source model (id, bundleId, type, title, date, url, notes)
- [ ] Claim model (id, bundleId, text, sourceIds)
- [ ] Beat model (id, storyId, name, order, description)
- [ ] Scene model (id, storyId, title, beatId, mode, sensoryAnchor, targetWordCount, bundleIds, order)
- [ ] Person model with arc tracking
- [ ] Theme model
- [ ] Manuscript and ManuscriptScene models
- [ ] EvidenceLink model with isInterpretation flag
- [ ] ReviewReport model

## Priority
High

## Type
Task","backend,data-model","Phase 1: Foundation"
"Set Up State Management","## Description
Implement state management for the application.

## Acceptance Criteria
- [ ] Choose state management solution (Zustand/Redux Toolkit recommended)
- [ ] Create stores for Story, Bundles, Scenes, Beats, Persons, and Themes
- [ ] Implement persistence layer (localStorage initially, IndexedDB later)
- [ ] Add undo/redo capability for editing actions

## Priority
High

## Type
Task","frontend,state","Phase 1: Foundation"
"Design System & UI Components","## Description
Create the foundational UI components and design tokens.

## Acceptance Criteria
- [ ] Set up component library (shadcn/ui or similar)
- [ ] Define color palette (including reliability state indicators)
- [ ] Create reliability state icons with accessible alternatives
- [ ] Implement 3 UI loudness levels (Quiet, Attentive, Alert)
- [ ] Create reusable Panel components for the layout

## Priority
Medium

## Type
Task","frontend,design","Phase 1: Foundation"
"Dashboard with Story Management","## Description
Build the main dashboard for managing stories.

## Acceptance Criteria
- [ ] Story list view
- [ ] Create new story
- [ ] Open existing story
- [ ] Delete story
- [ ] Story status indicators

## Priority
High

## Type
Feature","frontend,ui","Phase 1: Foundation"
"SEED Mode Intent Form","## Description
Build the SEED mode interface for capturing story intent.

## Acceptance Criteria
- [ ] Title field (required)
- [ ] Premise field (1-3 sentences, required)
- [ ] Target length selector (optional - advisory only)
- [ ] Form selector (Reported / Personal essay / Hybrid / Other)
- [ ] POV selector (First / Third limited / Third omniscient / Braided)
- [ ] Verification questions list (what must be verified)
- [ ] Output: Story Intent Card that guides subsequent modes

## Priority
High

## Type
Feature","seed-mode,ui","Phase 1: Foundation"
"Mode Navigation","## Description
Implement seamless mode switching.

## Acceptance Criteria
- [ ] Clear mode indicator: SEED → SHAPE → DRAFT → TEST
- [ ] Preserve state when switching modes
- [ ] Handle incomplete data gracefully (system degrades gracefully)

## Priority
High

## Type
Feature","frontend,navigation","Phase 1: Foundation"
"Bundle CRUD","## Description
Implement evidence bundle management.

## Acceptance Criteria
- [ ] Create evidence bundles manually
- [ ] Assign bundle type (EVT, ID, QTY, ATTR, SEQ)
- [ ] Track reliability state (verified, sourced, unlinked, contested)
- [ ] Edit and delete bundles
- [ ] Add key extracts to bundles

## Priority
High

## Type
Feature","shape-mode,evidence","Phase 2: Evidence Layer"
"Source Management","## Description
Implement source import and management.

## Acceptance Criteria
- [ ] Add sources to bundles
- [ ] Source types: web, document, interview, personal, other
- [ ] Store source metadata (title, date, url, notes)
- [ ] Link sources to claims
- [ ] Paste URL and extract content
- [ ] Paste notes directly

## Priority
High

## Type
Feature","shape-mode,sources","Phase 2: Evidence Layer"
"Claims Management","## Description
Implement claim tracking within bundles.

## Acceptance Criteria
- [ ] Add claims to bundles
- [ ] Link claims to sources
- [ ] Display claims with source attribution
- [ ] Bundle summary showing reliability state

## Priority
High

## Type
Feature","shape-mode,evidence","Phase 2: Evidence Layer"
"Scene Structure","## Description
Implement scene creation and management.

## Acceptance Criteria
- [ ] Create scenes with titles
- [ ] Optional word count targets (advisory only)
- [ ] Scene mode (showing / telling / mixed)
- [ ] Sensory anchor field
- [ ] Reorder scenes with drag-and-drop
- [ ] Link bundles to scenes

## Priority
High

## Type
Feature","shape-mode,structure","Phase 2: Evidence Layer"
"SHAPE Mode Three-Panel Layout","## Description
Build the SHAPE mode interface.

## Acceptance Criteria
- [ ] Left Panel: Evidence Bundles list
- [ ] Center Panel: Structure Board (scenes + beats)
- [ ] Right Panel: Bundle/Scene detail view
- [ ] Drag-and-drop between panels

## Priority
High

## Type
Feature","shape-mode,ui","Phase 2: Evidence Layer"
"Beat Definitions","## Description
Implement beat management for narrative structure.

## Acceptance Criteria
- [ ] Create custom beats (or use defaults from frameworks)
- [ ] Beat order management
- [ ] Beat descriptions
- [ ] Default beat templates (Freytag, Story Circle)

## Priority
Medium

## Type
Feature","shape-mode,structure","Phase 3: Structure Layer"
"Scene-to-Beat Assignment","## Description
Allow assigning scenes to beats (many-to-one relationship).

## Acceptance Criteria
- [ ] Assign multiple scenes to a single beat
- [ ] Leave scenes unassigned (optional)
- [ ] Beats panel overlay showing scene-beat mapping
- [ ] Identify structural gaps or imbalances

## Priority
Medium

## Type
Feature","shape-mode,structure","Phase 3: Structure Layer"
"Structure Board Visualization","## Description
Visualize story structure with beats and scenes.

## Acceptance Criteria
- [ ] Visual representation of beats
- [ ] Scenes grouped under their assigned beats
- [ ] Unassigned scenes section
- [ ] Scene word count and evidence indicators

## Priority
Medium

## Type
Feature","shape-mode,ui","Phase 3: Structure Layer"
"Rich Text Editor","## Description
Build the core manuscript editor.

## Acceptance Criteria
- [ ] Rich text editing with basic formatting (bold, italic, headers)
- [ ] Scene-based document structure
- [ ] Auto-save functionality
- [ ] Word count display per scene and total
- [ ] Clean writing surface by default

## Priority
High

## Type
Feature","draft-mode,editor","Phase 4: Draft Editor"
"Scene List Panel","## Description
Implement the left panel showing scene list in DRAFT mode.

## Acceptance Criteria
- [ ] Scene list with word count progress
- [ ] Completion status indicators (✓ complete, ● in progress, ○ empty)
- [ ] Beat assignment display
- [ ] Quick navigation between scenes

## Priority
High

## Type
Feature","draft-mode,navigation","Phase 4: Draft Editor"
"Evidence Linking","## Description
Allow linking text to evidence claims.

## Acceptance Criteria
- [ ] Select text and link to existing claim
- [ ] Create new claim from selected text
- [ ] Evidence linking via selection → modal
- [ ] Mark as interpretation (excluded from reliability tracking)
- [ ] Keyboard shortcut: Cmd/Ctrl + L

## Priority
High

## Type
Feature","draft-mode,evidence","Phase 4: Draft Editor"
"Text Highlighting","## Description
Implement color-coded highlighting for evidence grounding.

## Acceptance Criteria
- [ ] Green: Linked to verified/sourced evidence
- [ ] Yellow: Weak source
- [ ] Red/Orange: Looks like a claim but no evidence linked
- [ ] No highlight: Narrative/interpretation

## Priority
Medium

## Type
Feature","draft-mode,ui","Phase 4: Draft Editor"
"Evidence & Warnings Panel","## Description
Implement the right panel showing evidence for current scene.

## Acceptance Criteria
- [ ] Evidence used in current scene
- [ ] Warnings for unlinked claims
- [ ] Suggestions (link, hedge, reframe as interpretation)
- [ ] Non-blocking suggestions

## Priority
Medium

## Type
Feature","draft-mode,ui","Phase 4: Draft Editor"
"LLM Integration Layer","## Description
Set up LLM integration with appropriate model selection.

## Acceptance Criteria
- [ ] API integration for small model (4o-mini) - claim detection, tighten/hedge
- [ ] API integration for large model (GPT-4o, Claude) - full review
- [ ] Cost tracking per story
- [ ] Error handling and retry logic

## Priority
High

## Type
Infrastructure","backend,ai","Phase 5: Review System"
"TEST Mode UI Layout","## Description
Build the TEST mode interface.

## Acceptance Criteria
- [ ] Review report display area
- [ ] Priority fixes list with navigation
- [ ] Run review button
- [ ] Report history access

## Priority
High

## Type
Feature","test-mode,ui","Phase 5: Review System"
"Review Generation","## Description
Generate comprehensive reliability and craft reviews.

## Acceptance Criteria
- [ ] Factual grounding assessment (status + specific issues)
- [ ] Reliability counts: verified, sourced, unlinked, contested
- [ ] Structure & flow observations (not grades)
- [ ] Voice & framing observations (not grades)
- [ ] Ethics/harm flags for consideration
- [ ] No numeric scores

## Priority
High

## Type
Feature","test-mode,ai","Phase 5: Review System"
"Priority Fixes List","## Description
Actionable fix suggestions.

## Acceptance Criteria
- [ ] Top 3 actionable issues with locations
- [ ] Click to navigate to relevant paragraph
- [ ] Track which fixes have been addressed
- [ ] No automatic edits - author control

## Priority
High

## Type
Feature","test-mode,ui","Phase 5: Review System"
"Report History","## Description
Save and compare previous review reports.

## Acceptance Criteria
- [ ] Save review reports with timestamps
- [ ] View previous reports
- [ ] Compare reports over time

## Priority
Medium

## Type
Feature","test-mode,storage","Phase 5: Review System"
"People/Character Panel","## Description
Implement person/character tracking.

## Acceptance Criteria
- [ ] Person card minimal view (name, role, first appears)
- [ ] Person card expanded view (arc, details, speech patterns)
- [ ] Track appearances across scenes
- [ ] Source reliability vs character reliability distinction
- [ ] Link to evidence bundles

## Priority
Medium

## Type
Feature","craft,ui","Phase 6: Craft Layer"
"Theme Tracking","## Description
Implement theme management.

## Acceptance Criteria
- [ ] Create themes manually (system doesn't auto-detect)
- [ ] Theme descriptions
- [ ] Track theme appearances in scenes

## Priority
Medium

## Type
Feature","craft,ui","Phase 6: Craft Layer"
"Arc Definitions","## Description
Track character and narrator arcs.

## Acceptance Criteria
- [ ] Person arc (starting state, ending state, turning point)
- [ ] Narrator arc for first-person pieces
- [ ] Optional - not all pieces have clean arcs

## Priority
Medium

## Type
Feature","craft,ui","Phase 6: Craft Layer"
"Craft Observations in Review","## Description
Include craft observations in TEST mode review.

## Acceptance Criteria
- [ ] Scene function observations
- [ ] Pacing observations
- [ ] Setup/payoff analysis
- [ ] Telling vs showing identification
- [ ] Observations, not prescriptions

## Priority
Medium

## Type
Feature","test-mode,ai","Phase 6: Craft Layer"
"Assistance Actions","## Description
Implement author-triggered writing assistance.

## Acceptance Criteria
- [ ] Link Evidence: Connect selected text to a claim
- [ ] Tighten: LLM rewrites paragraph more concisely
- [ ] Add Hedging: LLM adds uncertainty language to weak claims
- [ ] Mark as Interpretation: Remove from reliability tracking

## Priority
Medium

## Type
Feature","draft-mode,ai","Phase 7: Polish"
"Keyboard Shortcuts","## Description
Implement keyboard-first workflow.

## Acceptance Criteria
- [ ] Cmd/Ctrl + L: Link selected text to evidence
- [ ] Cmd/Ctrl + I: Mark selected text as interpretation
- [ ] Cmd/Ctrl + Enter: Run TEST review
- [ ] Cmd/Ctrl + 1-4: Switch modes

## Priority
Medium

## Type
Feature","ux,keyboard","Phase 7: Polish"
"Progressive Disclosure UI","## Description
Implement information hierarchy.

## Acceptance Criteria
- [ ] Surface level: Scene list, word counts, overall status (always visible)
- [ ] Working level: Bundles, current paragraph's evidence, beat assignments
- [ ] Deep level: Individual claims, full provenance chain (on explicit request)

## Priority
Medium

## Type
Feature","ux,ui","Phase 7: Polish"
"Data Persistence","## Description
Implement reliable data storage.

## Acceptance Criteria
- [ ] Local storage for POC (IndexedDB)
- [ ] Auto-save every 30 seconds
- [ ] Export story as JSON
- [ ] Import story from JSON
- [ ] Backup/restore functionality

## Priority
High

## Type
Infrastructure","backend,storage","Phase 7: Polish"
"Self-Testing with Real Story","## Description
Test the application with a real story.

## Acceptance Criteria
- [ ] Write a complete story using the tool
- [ ] Document friction points
- [ ] Log bugs found
- [ ] Create improvement suggestions

## Priority
High

## Type
Task","testing,documentation","Phase 7: Polish"
"Open Questions Testing Tracker","## Description
Track answers to open questions during testing.

## Questions to Track
1. Beat utility: Do authors use beat assignments, or just scenes?
2. Form distinction: Does marking a piece 'personal' vs 'reported' change behavior usefully?
3. Length guidance: Is advisory length helpful, or does it create pressure?
4. Non-linear support: Can the tool accommodate pieces that don't arc conventionally?
5. Interpretation marking: Do authors use 'mark as interpretation' to reduce noise?

## Priority
Low

## Type
Documentation","testing,documentation","Phase 7: Polish"
